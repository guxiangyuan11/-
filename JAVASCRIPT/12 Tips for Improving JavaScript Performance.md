>原文链接 原文[原文](https://nodesource.com/blog/improve-javascript-performance)

## 提升JS性能的12个技巧

提升性能是我们在创建一个网页或是应用时最看重的一个方面，没有人想要一个时常崩溃的应用和一直加载不出来的网页，以及用户等待的时间不会太长（没明白他这句是什么意思，我想他这里应该是想说等待时间过长），据Kissmetrics称，47％的访问者希望网站在不到2秒的时间内加载，如果加载过程超过3秒，40％的访问者将离开网站。

考虑到以上的数字，在创建Web应用程序时应始终考虑到性能。为了帮助你入门，以下14（？？哪来的14个）个方法能够有效的提高程序性能：

#### 1.使用浏览器缓存

这有两种做法，第一使用js的缓存API，我们可以通过安装service worker来使用它，第二种是使用HTTP协议缓存。

脚本通常用于访问某个对象，通过在用户自定义的变量中存储重复访问的对象，以及在后续对该对象的引用中使用变量，可以立即实现性能提升。（这个技巧简而言之就是使用缓存以及存储需要重复使用的对象，不知道service worker的看这里（[serviceWorker](https://www.jianshu.com/p/08c0fdec31b4)））

#### 2.定义执行上下文
为了有效的测量您在计划中加入的任何改进，您必须建立一套定义良好的环境，以便测试代码的性能。

尝试对所有JS引擎的所有版本进行性能测试和优化在实践中是不可行的。但是在一个单一的环境下进行测试并不是一个好的习惯，因为这将会给你带来一个片面的结果。因此，建立多个定义良好的环境并测试代码是否适用于它们非常重要。（定义一套测试环境很重要）

#### 3.移除不重要的JS代码
这个技巧不仅会缩短传输时间，还会缩短浏览器分析和编译代码所需的时间。为此，你必须考虑以下几点： 

* 如果您检测到用户未使用的功能，最好删除其所有相关的JS代码，这样网站的加载速度会更快，用户也会有更好的体验。
* 这也有可能是错误的包含了不必要的库，或者你的依赖库提供的一些早已在所有浏览器中实现的功能，而无需使用其他代码。

（简单来说就是删除用不上的功能代码，虽然现在都是使用打包工具按需加载，但是我们在工作中不免会有因为需求的更改而弃用的函数，这些都是垃圾代码都是需要删除的）
#### 4.避免使用太多内存
你应该总是试着将内存使用限制在绝对必要的范围内，因为无法知道运行你的程序需要占用多少的设备内存空间。任何时候你的代码在请求浏览器存储新内存时，就会执行浏览器的垃圾回收器，并将停止JS。 如果经常发生这种情况，页面将运行的很慢。

#### 5. 推迟不必要的JS加载
用户希望看到页面快速加载，但是所有功能都不可能在页面初始化的时候进行加载。如果一个用户需要执行某个操作才能执行某个功能(e.g. 通过点击一个element, 或是改变tabs),那么就可以推迟加载该功能直到页面初始化之后。

用这种方式，你可以避免因加载和编译JS代码所导致页面初始化延迟显示的情况，档一个页面完全加载完后，我们就可以加载这些功能，以便用户在进行交互时能立即使用。在RAIL模型中，Google建议将此延迟加载以50毫秒为单位进行，这样就不会影响用户与页面的交互。（将一些交互功能放到页面加载之后，能够迅速提高页面的显示速度）

如果发生内存泄漏，加载的页面将保留越来越多的内存，最终占用设备的所有可用内存，严重影响性能。您可能已经看到（并且可能对）这种类型的失败感到沮丧，可能是在带有旋转木马或图像滑块的页面上。
您可能已经看到（并且可能对此类故障感到沮丧），可能是在带有旋转木马或图像滑块的页面上。
#### 6.避免内存泄漏
如果发生内存泄漏，加载的页面将会存储越来越多的内存，最终会占用设备所有的可用内存，严重影响性能。你可能已经看到（并且可能）对此类错误感到沮丧，可能会出现旋转木马或轮播图中。

在Chrome开发者工具中，你可以通过Performance标签中的时间线记录来分析你的网站是否存在内存泄漏。通常，内存泄漏来自于从页面中删除一些DOM，但是还有一些引用它们的变量，因此，垃圾收集器无法消除它们。（一些对JS使用不当的方式也会造成内存泄漏，例如大量使用闭包和递归的时候）

#### 7.当您需要大量的执行时间去执行代码时，请使用Web worker
根据Mozilla开发人员网络（MDN）文档上的描述：通过使用Web Workers，Web应用程序可以在独立于主线程的后台线程中，运行一个脚本操作。


#### 2.
#### 2.
#### 2.
#### 2.
#### 2.
#### 2.